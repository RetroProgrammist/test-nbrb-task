# Тестово задание

Для запуска необходим сервер с php + mysql бд 
Настройки поместить в файл .env в корне сайта, обязательные поля смотрите в .env.example
MYSQL_DATABASE - имя БД в ней автоматически создастся таблица rates при первом запросе к файлу index.php  
  
**index.php** - пропишите его как входной файл в сервере, там роутер крутиться

> Важно тут опущены многие моменты, с целью упростить, Go я не взял из-за не достаточного опыта с ним и ограничений по времени

### Запуск cron 

В кроне должен вызывать **index.php** файл с переданным параметром **cron** - параметр обязателен.  
Пример смотрите в cron.sh 


### Запуск проекта с использованием Warden

[Зайти на сайт и установить warden](https://docs.warden.dev/installing.html)

**.env.warden -> переименовать в .env - это настройки для Warden** 
Далее в корне сайта запустить: `warden svc start & warden env up ` 
После нужно зарегестрировать ssl сертификат: `warden sign-certificate nbrb-rates.test`  
  
Чтобы сайт был доступен нужно пробросить домен в своем DNS, для винды это прописать **app.nbrb-rates.test в hosts файле**  
Подробнее [тут](https://docs.warden.dev/configuration/dns-resolver.html)  
  
После этого должно запуститься окружение и по пути https://app.nbrb-rates.test/ будет доступен сайт

### Работа

Есть 3 пути:  
- /currencies/all - возвращает все записи из БД
- /currencies/:date - по дате возвращает, дата в формате Y-m-d, пример /currencies/2024-10-07
- /load/ - заполняет БД записями за последние 5 дней, проверки я не делал на уникальность, потому если запустить несколько раз то в БД будут дубликаты, в выборку по дате попадут все записи за указанную дату
